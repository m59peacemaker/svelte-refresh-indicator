<div class="arrow" style="transform: rotate(90deg); opacity: {{ progressRatio }};">
  <ArrowSide
    which="left"
    color="{{ color }}"
    rotate="{{ rotate }}"
    borderWidth="{{ borderWidth }}"
  />
  <ArrowSide
    which="right"
    color="{{ color }}"
    rotate="{{ rotate }}"
    borderWidth="{{ borderWidth }}"
  />
  {{#if progressRatio > 0.3 }}
    <div class="arrow-head-rotate" style="transform: rotate({{ rotate - 136 }}deg);">
      <ArrowHead size="{{ size }}" sizeRatio="{{ (progressRatio - 0.3) / 0.7 }}"/>
    </div>
  {{/if}}
</div>

<script>
import ArrowSide from './ArrowSide.html'
import ArrowHead from './ArrowHead.html'

const COMPLETE_ROTATION = 270

export default {
  data () {
    return {
      size: 44,
      color: '#2196f3',
      progressRatio: 1
    }
  },

  computed: {
    rotate: progressRatio => COMPLETE_ROTATION * progressRatio,
    borderWidth: size => Math.round(size * 0.1154)
  },

  components: {
    ArrowSide,
    ArrowHead
  }
}
</script>

<style>

.arrow {
  position: relative;
  height: 100%;
}

.arrow-head-rotate {
  height: 100%;
  width: 100%;
}

</style>
